---
title: "Kth Largest Element in a Stream"
question_id: "703"
question_link: "https://leetcode.com/problems/kth-largest-element-in-a-stream/description/"
difficulty: "Easy"
---

1. Design a class to find kth largest element in a stream (we can continue to add numbers). kth largest element in the sorted order, not the kth distinct element

- `KthLargest` initializes the object with the integer k and the stream of integers nums
- `add` Appends the integer `val` to the stream and returns the element representing the `kth` largest element in the stream

One way we can do is by sorting it first then use binary search to find the value we want, however if we want to add a new value but when we insert into the middle of the array using binary search it would become O(n).

So the best data structure to use is Min Heap of Size K. But what is a heap? it's a sorta sorted data structure where we can add/pop in log n time and min O(1) but because there isn't any remove function required we can use the Min heap.

The base intuition we need for this question is that in order to maintain the k-th largest element in a stream of numbers, we do not need to store all values. Instead, we only need to track the largest k elements seen so far.

- A min heap will always keep te smallest value at the top
- If the heap contains the k largest elements, then the smallest among them is exactly the k-th largest overall
- Whenever a new number arrives:
    - If we add it and the heap grows beyond k, we remove the smallest element because it cannot be in the top k anymore.

In this way the always holds exactly the top k elements and retrieving the k-th largest is O(1)


```python
class KthLargest(object):

    def __init__(self, k, nums):
        """
        :type k: int
        :type nums: List[int]
        """

        # minHeap with k largest integers
        self.minHeap, self.k = nums, k
        heapq.heapify(self.minHeap)
        while len(self.minHeap) > k:
            heapq.heappop(self.minHeap)
        

    def add(self, val):
        """
        :type val: int
        :rtype: int
        """
        heapq.heappush(self.minHeap, val)
        if len(minHeap) > self.k:
            heapq.heappop(minHeap)
        return self.minHeap[0]
```

> Time Complexity : `O(mâˆ—logk)`
> 
> Space Complexity : `O(k)`